<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="description" content="Soulify - Connect with strangers anonymously through text, voice, and video chat">
  <meta name="theme-color" content="#6366f1">
  <title>Soulify - Anonymous Chat</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div id="container">
    <header class="rounded-container">
      <div class="app-title">
        <img src="soulify-logo.png" alt="Soulify Logo" class="app-logo">
        <h1>Soulify</h1>
      </div>
      <div class="header-controls">
        <span id="onlineUsers">Online Users: <span id="onlineCount">0</span></span>
        <button id="toggleMode" class="mode-btn">🌙</button>
      </div>
    </header>

    <main class="rounded-container">
      <div class="hero-section">
        <h2>Welcome to Soulify</h2>
        <p>Connect with strangers anonymously through text, voice, and video chat</p>

        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">💬</div>
            <h3>Text Chat</h3>
            <p>Have conversations with strangers from around the world</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">🎤</div>
            <h3>Voice Messages</h3>
            <p>Send voice messages to make conversations more personal</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">📹</div>
            <h3>Video Chat</h3>
            <p>Connect face-to-face with video calling feature</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">📷</div>
            <h3>Media Sharing</h3>
            <p>Share images and videos to express yourself better</p>
          </div>
        </div>

        <div class="cta-section">
          <button id="startChattingBtn" class="start-btn">Start Chatting!</button>
          <p class="privacy-note">Your conversations are anonymous and secure</p>
        </div>
      </div>
    </main>

    <footer class="rounded-container">
      <div class="powered-by">
        <img src="devkart-logo.png" alt="DevKart Logo" class="powered-logo">
        <span>Powered by DevKart</span>
      </div>
      <div class="contact-info">
        <div class="social-media">
          <img src="facebook-logo.png" alt="Facebook" class="contact-logo">
          <img src="instagram-logo.png" alt="Instagram" class="contact-logo">
        </div>
      </div>
    </footer>
  </div>

  <script>
    const socket = io();

    // Update online users count
    socket.on('updateOnlineUsers', (count) => {
      document.getElementById('onlineCount').textContent = count;
    });

    // Check if user has completed setup
    const setupCompleted = localStorage.getItem('setupCompleted');
    const userPreferences = localStorage.getItem('soulify_preferences');

    // Handle start chatting button
    document.getElementById('startChattingBtn').addEventListener('click', function() {
      if (setupCompleted && userPreferences) {
        // User has completed setup, go directly to chat
        window.location.href = '/talk$dsw';
      } else {
        // User needs to complete setup first
        window.location.href = '/setup';
      }
    });

    // Load saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      document.body.classList.add('dark-mode');
      document.getElementById('toggleMode').innerHTML = '☀️';
    }

    // Dark/Light Mode Toggle
    const toggleButton = document.getElementById('toggleMode');
    toggleButton.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
        toggleButton.innerHTML = '☀️';
        localStorage.setItem('theme', 'dark');
      } else {
        toggleButton.innerHTML = '🌙';
        localStorage.setItem('theme', 'light');
      }
    });

    // Add visual feedback for button clicks
    const buttons = document.querySelectorAll('.start-btn, .mode-btn');
    buttons.forEach(button => {
      button.addEventListener('click', function() {
        this.style.transform = 'scale(0.95)';
        setTimeout(() => {
          this.style.transform = 'scale(1)';
        }, 150);
      });
    });
  </script>
</body>
</html>